# AI视频生成平台 - 业务需求文档

## 项目概述

### 定位
AI驱动的视频生成SaaS平台，支持人机协作的创意视频制作工作流。

### 技术栈
- **前端**：React 生态
- **后端**：Node.js（具体技术栈待定）
- **核心特性**：图生视频（Image-to-Video）

### 开发优先级
1. 快速上线
2. 用户体验
3. 可扩展性

---

## 产品愿景（完整工作流）

完整的视频创作工作流包含三个阶段，均支持人机协作：

```
剧本/脚本创作 → 分镜设计 → 视频生成
   (人+AI)      (人+AI)    (图生视频/文生视频)
```

---

## MVP版本范围

### 核心聚焦
- **功能范围**：图生视频（Image-to-Video）
- **前置假设**：用户已完成剧本、脚本、分镜的准备工作
- **目标用户**：终端用户（创作者）
- **用户规模**：初期小规模试用
- **商业模式**：免费使用
- **用户系统**：MVP阶段不需要用户登录/注册系统

### 不包含的功能（未来规划）
- 剧本/脚本创作辅助
- 分镜设计工具
- 文生视频功能
- 用户账号体系
- 付费订阅功能

---

## 产品设计（Web界面UE）

### 整体布局架构

**单页面横向滚动布局**
- 多个工作空间沿浏览器水平轴（横轴）排列
- 类似剪映的视频时间轴概念
- 所有工作空间按创作顺序从左到右排列
- 支持横向滚动查看所有工作空间

```
┌─────────────────────────────────────────────────────────────┐
│  [工作空间1] [工作空间2] [工作空间3] ... [工作空间N] [+]   │
│  ←────────────── 横向滚动 ────────────────→                │
└─────────────────────────────────────────────────────────────┘
```

### 工作空间（Workspace）

**概念**：每张图片对应一个独立的工作空间

**添加机制**：
- 最右侧有一个 `+` 按钮
- 点击后在 `+` 左侧插入新的工作空间
- 新工作空间自动加入时间轴序列

---

## 工作空间内部结构

每个工作空间包含 **4大功能区域**：

### 1. 图片载入区（Image Upload Area）

**位置**：工作空间顶部

**组件**：
- 上传按钮（Upload Button）
- 图片展示区域（Image Preview）

**功能**：
- 支持用户上传单张图片
- 展示已上传的分镜图片

---

### 2. 视频生成表单区（Video Generation Form）

**位置**：图片载入区下方

**表单字段**：

#### 下拉框（Dropdown）
- **运镜方式**：推拉摇移跟等摄影机运动
- **景别**：远景、全景、中景、近景、特写等
- **光线**：自然光、硬光、柔光、侧光、逆光等
- **其他导演/摄影参数**：根据实际需求扩展

#### 复选框（Checkbox）
- 其他可多选的拍摄选项

#### 输入框（Text Input）
- **主体运动提示词**：描述画面中主体的动作、情绪、变化等
- 支持多行文本输入

#### 提交按钮（Submit Button）
- 发送图生视频请求到后台API
- 触发视频生成流程

**交互逻辑**：
- 用户填写完表单后点击提交
- 前端发送请求到后端API
- 后端调用AI图生视频服务
- 生成完成后返回视频URL

---

### 3. 视频展示区（Video Display Area）

**位置**：表单区正下方（垂直布局）

**功能**：
- 展示生成后的视频
- 支持视频播放控制（播放/暂停/进度条等）
- 可能支持视频下载

**状态**：
- 未生成：显示占位符或空状态提示
- 生成中：显示加载动画/进度条
- 生成完成：展示视频播放器

---

### 4. AI协作区（AI Collaboration Area）

**位置**：工作空间右侧（垂直布局与其他区域并列）

**使用场景**：
当用户对生成的视频不满意，但不确定如何修改参数时

**输入内容**：
- 用户在输入框中描述问题或期望
- 例如："视频太静态了，想要更动感"

**AI分析依据**：
- 当前上传的图片
- 用户填写的提示词和参数
- 已生成的视频

**AI输出**：
- 按照「视频生成表单」的格式给出修改建议
- 例如：
  - 运镜方式：建议从"固定"改为"推进"
  - 主体运动提示词：建议添加"快速奔跑，动作流畅"

**交互形式**：
- 输入框：用户输入问题描述
- 提交按钮：发送AI协作请求
- 响应展示区：显示AI的修改建议

**可选优化**：
- AI建议可一键应用到表单
- 支持多轮对话式优化

---

## 工作空间布局示意

```
┌──────────────────────────────────────────────────────────────┐
│                    【工作空间 N】                            │
├─────────────────────────────────────┬────────────────────────┤
│  ┌─────────────────────────────┐   │                        │
│  │  [上传按钮] [图片展示区]    │   │   【AI协作区】         │
│  └─────────────────────────────┘   │                        │
│                                     │   ┌──────────────────┐ │
│  ┌─────────────────────────────┐   │   │ 输入框：         │ │
│  │  【视频生成表单】           │   │   │ "视频太静态了..." │ │
│  │                             │   │   └──────────────────┘ │
│  │  运镜: [下拉框▼]            │   │                        │
│  │  景别: [下拉框▼]            │   │   [发送]              │
│  │  光线: [下拉框▼]            │   │                        │
│  │  □选项1 □选项2              │   │   ┌──────────────────┐ │
│  │                             │   │   │ AI建议：         │ │
│  │  主体运动提示词:             │   │   │ - 运镜改为推进   │ │
│  │  [文本输入框............]   │   │   │ - 添加动作描述... │ │
│  │                             │   │   └──────────────────┘ │
│  │  [提交生成]                 │   │                        │
│  └─────────────────────────────┘   │                        │
│                                     │                        │
│  ┌─────────────────────────────┐   │                        │
│  │  【视频展示区】             │   │                        │
│  │  [视频播放器]               │   │                        │
│  │  ▶️ ──────●────── 🔊        │   │                        │
│  └─────────────────────────────┘   │                        │
└─────────────────────────────────────┴────────────────────────┘
```

---

## 数据持久化

**存储方式**：后端存储

**需要保存的数据**：
- 用户上传的图片
- 表单填写的参数（运镜、景别、提示词等）
- 生成的视频URL
- 工作空间的顺序
- AI协作的历史记录

**数据结构示例**（概念）：

```json
{
  "workspaces": [
    {
      "id": "workspace_1",
      "order": 1,
      "image_url": "https://...",
      "form_data": {
        "camera_movement": "推进",
        "shot_type": "中景",
        "lighting": "自然光",
        "motion_prompt": "人物缓缓转身，眼神坚定"
      },
      "generated_video_url": "https://...",
      "ai_collaboration_history": [
        {
          "user_input": "视频太静态了",
          "ai_suggestion": "..."
        }
      ]
    }
  ]
}
```

---

## 技术实现要点（前端）

### 关键功能点

1. **横向滚动容器**
   - 实现流畅的横向滚动体验
   - 响应式设计，适配不同屏幕宽度

2. **工作空间组件化**
   - 每个工作空间作为独立的React组件
   - 支持动态添加/删除

3. **图片上传**
   - 支持拖拽上传
   - 图片预览和格式验证
   - 上传到后端服务器

4. **表单管理**
   - 表单状态管理（React Hook Form / Formik）
   - 实时验证
   - 提交loading状态

5. **视频播放**
   - 视频播放器组件
   - 播放控制和进度显示

6. **AI协作交互**
   - 异步请求处理
   - 建议内容的结构化展示
   - 可选：一键应用建议到表单

7. **状态管理**
   - 全局状态：工作空间列表、顺序
   - 组件状态：表单数据、视频生成状态
   - 推荐使用 Redux / Zustand / Context API

8. **数据同步**
   - 定期保存到后端
   - 错误重试机制
   - 离线草稿支持（可选）

---

## 技术实现要点（后端）

### API端点设计（概念）

#### 1. 工作空间管理
- `GET /api/workspaces` - 获取所有工作空间
- `POST /api/workspaces` - 创建新工作空间
- `PUT /api/workspaces/:id` - 更新工作空间
- `DELETE /api/workspaces/:id` - 删除工作空间

#### 2. 图片上传
- `POST /api/upload/image` - 上传图片
- 返回图片URL

#### 3. 视频生成
- `POST /api/generate/video` - 提交图生视频请求
- 请求体：图片URL + 表单参数
- 返回：任务ID（异步处理）
- `GET /api/generate/video/:taskId` - 查询生成状态

#### 4. AI协作
- `POST /api/ai/suggest` - 提交优化建议请求
- 请求体：图片URL + 表单参数 + 视频URL + 用户描述
- 返回：AI的修改建议（结构化数据）

### 核心服务

1. **图片存储服务**
   - 对象存储（OSS/S3）或本地文件系统
   - 图片处理（压缩、格式转换）

2. **AI图生视频服务**
   - 集成第三方AI服务（Runway/Pika/自研模型）
   - 任务队列管理
   - 异步处理和回调

3. **AI协作服务**
   - LLM集成（GPT/Claude等）
   - Prompt工程：输入上下文构建
   - 输出解析：将AI建议转为结构化数据

4. **数据存储**
   - 数据库选型（PostgreSQL/MongoDB）
   - 工作空间数据模型设计
   - 文件URL存储

---

## 用户体验流程

### 典型用户旅程

1. **进入平台**
   - 用户打开Web应用（无需登录）
   - 看到空白画布，右侧有 `+` 按钮

2. **创建第一个工作空间**
   - 点击 `+` 按钮
   - 出现第一个工作空间

3. **上传图片**
   - 点击上传按钮或拖拽图片
   - 图片显示在展示区

4. **填写生成参数**
   - 选择运镜方式：推进
   - 选择景别：中景
   - 选择光线：自然光
   - 输入主体运动："人物缓缓转身，眼神望向远方"

5. **提交生成**
   - 点击"提交生成"按钮
   - 视频展示区显示加载状态
   - 等待30秒-2分钟（视AI服务速度）
   - 视频生成完成，自动播放预览

6. **查看结果**
   - 播放视频，检查效果

7. **（可选）AI协作优化**
   - 如果不满意，在右侧AI协作区输入："动作太慢了，需要更有张力"
   - AI分析后返回建议：
     - 运镜改为"快速推进"
     - 主体运动改为"人物猛然转身，眼神锐利"
   - 用户根据建议修改表单，重新生成

8. **继续创作下一个镜头**
   - 点击最右侧 `+` 按钮
   - 创建第二个工作空间
   - 重复步骤3-7

9. **横向查看所有镜头**
   - 横向滚动查看所有工作空间
   - 形成完整的视频序列时间轴

10. **导出/保存**
    - （未来功能）将所有视频片段合成完整视频
    - MVP阶段：用户可以手动下载各个视频片段

---

## MVP成功标准

### 功能完整性
- ✅ 能够创建多个工作空间并横向排列
- ✅ 能够上传图片
- ✅ 能够填写完整的视频生成表单
- ✅ 能够成功调用AI服务生成视频
- ✅ 能够展示生成的视频
- ✅ 能够使用AI协作获得优化建议

### 性能指标
- 图片上传响应时间 < 3秒
- 视频生成时间取决于AI服务（30秒-5分钟可接受）
- 页面加载时间 < 2秒
- 横向滚动流畅，无卡顿

### 用户体验
- 界面简洁直观，无需教程即可上手
- 表单字段清晰，选项符合专业术语
- 生成过程有明确的状态反馈
- AI建议易于理解和应用

---

## 技术风险与挑战

### 1. AI服务集成
- **风险**：第三方AI服务稳定性、响应时间、成本
- **应对**：选择可靠的服务商，设计降级方案

### 2. 大文件传输
- **风险**：视频文件较大，传输和存储成本高
- **应对**：视频压缩、CDN加速、对象存储优化

### 3. 横向滚动性能
- **风险**：工作空间过多时可能影响性能
- **应对**：虚拟滚动、懒加载、组件性能优化

### 4. 数据一致性
- **风险**：多工作空间数据同步、并发生成任务
- **应对**：乐观更新策略、任务队列管理

---

## 未来扩展方向

### Phase 2：剧本/脚本创作
- AI辅助生成剧本
- 结构化脚本编辑器
- 自动生成分镜脚本

### Phase 3：分镜设计工具
- AI自动生成分镜图
- 分镜编辑和调整
- 分镜与剧本联动

### Phase 4：文生视频
- 纯文字描述生成视频
- 无需上传图片

### Phase 5：高级功能
- 视频片段智能合成
- 背景音乐和音效添加
- 字幕自动生成
- 批量导出和分享

### Phase 6：商业化
- 用户账号体系
- 订阅制/按量付费
- 团队协作功能
- 模板库和素材库

---

## 项目时间线（参考）

### Week 1-2：技术准备
- 前端项目脚手架搭建（React + TypeScript）
- 后端API框架搭建（Node.js）
- AI服务调研和接入测试
- 数据库设计

### Week 3-4：核心功能开发
- 工作空间组件开发
- 图片上传功能
- 视频生成表单实现
- 后端API开发

### Week 5：AI集成
- 图生视频服务集成
- AI协作功能开发
- 错误处理和重试机制

### Week 6：优化与测试
- 性能优化
- 用户体验打磨
- Bug修复
- 内部测试

### Week 7：发布准备
- 部署环境搭建
- 监控和日志
- 文档编写
- 小范围用户测试

### Week 8：MVP上线
- 正式发布
- 用户反馈收集
- 快速迭代

---

## 附录：术语表

| 术语 | 说明 |
|------|------|
| **工作空间（Workspace）** | 对应一张图片的完整创作界面，包含图片、表单、视频、AI协作四大区域 |
| **图生视频（Image-to-Video）** | 基于静态图片生成动态视频的AI技术 |
| **运镜（Camera Movement）** | 摄影机的运动方式，如推、拉、摇、移、跟等 |
| **景别（Shot Type）** | 镜头取景范围，如远景、全景、中景、近景、特写 |
| **主体运动提示词（Motion Prompt）** | 描述画面中主体动作、变化的文字说明 |
| **时间轴（Timeline）** | 所有工作空间的横向排列，代表视频的顺序序列 |
| **AI协作** | 用户与AI共同优化视频生成参数的交互过程 |

---

## 文档版本
- **版本号**：v1.0
- **创建时间**：2025-12-23
- **创建人**：产品+开发结对沟通
- **状态**：MVP阶段需求文档

---

**后续待补充**：
- 后端架构设计详细方案
- 数据库Schema设计
- API接口详细规格
- 前端组件库选型
- UI设计规范（颜色、字体、间距等）
- 埋点和数据分析方案
